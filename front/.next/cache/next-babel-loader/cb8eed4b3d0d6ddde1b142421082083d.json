{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { Button, Form, Input } from \"antd\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { ADD_COMMENT_REQUEST } from \"../reducers/post\";\n\nconst CommentForm = ({\n  post\n}) => {\n  const {\n    0: commentText,\n    1: setCommentText\n  } = useState(\"\");\n  const {\n    commentAdded,\n    isAddingComment\n  } = useSelector(state => state.post);\n  const {\n    me\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const onSubmitComment = useCallback(e => {\n    e.preventDefault();\n\n    if (!me) {\n      return alert(\"로그인이 필요합니다.\");\n    }\n\n    return dispatch({\n      type: ADD_COMMENT_REQUEST,\n      data: {\n        postId: post.id,\n        content: commentText\n      }\n    });\n  }, [me && me.id, commentText]);\n  useEffect(() => {\n    setCommentText(\"\");\n  }, [commentAdded === true]);\n  const onChangeCommentText = useCallback(e => {\n    setCommentText(e.target.value);\n  }, []);\n  return __jsx(Form, {\n    onSubmit: onSubmitComment\n  }, __jsx(Form.Item, null, __jsx(Input.TextArea, {\n    rows: 4,\n    value: commentText,\n    onChange: onChangeCommentText\n  })), __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    loading: isAddingComment\n  }, \"\\uC090\\uC57D\"));\n};\n\nexport default CommentForm;","map":{"version":3,"sources":["D:/project/react-nodebird/front/components/CommentForm.js"],"names":["React","useState","useCallback","useEffect","Button","Form","Input","useSelector","useDispatch","ADD_COMMENT_REQUEST","CommentForm","post","commentText","setCommentText","commentAdded","isAddingComment","state","me","user","dispatch","onSubmitComment","e","preventDefault","alert","type","data","postId","id","content","onChangeCommentText","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,KAAvB,QAAoC,MAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAGA,SAASC,mBAAT,QAAoC,kBAApC;;AAEA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAc;AAC9B,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCZ,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM;AAAEa,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAAoCR,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACL,IAAhB,CAArD;AACA,QAAM;AAAEM,IAAAA;AAAF,MAASV,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACE,IAAhB,CAA1B;AACA,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;AAEA,QAAMY,eAAe,GAAGlB,WAAW,CAC/BmB,CAAC,IAAI;AACDA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI,CAACL,EAAL,EAAS;AACL,aAAOM,KAAK,CAAC,aAAD,CAAZ;AACH;;AACD,WAAOJ,QAAQ,CAAC;AACZK,MAAAA,IAAI,EAAEf,mBADM;AAEZgB,MAAAA,IAAI,EAAE;AACFC,QAAAA,MAAM,EAAEf,IAAI,CAACgB,EADX;AAEFC,QAAAA,OAAO,EAAEhB;AAFP;AAFM,KAAD,CAAf;AAOH,GAb8B,EAc/B,CAACK,EAAE,IAAIA,EAAE,CAACU,EAAV,EAAcf,WAAd,CAd+B,CAAnC;AAiBAT,EAAAA,SAAS,CAAC,MAAM;AACZU,IAAAA,cAAc,CAAC,EAAD,CAAd;AACH,GAFQ,EAEN,CAACC,YAAY,KAAK,IAAlB,CAFM,CAAT;AAIA,QAAMe,mBAAmB,GAAG3B,WAAW,CAACmB,CAAC,IAAI;AACzCR,IAAAA,cAAc,CAACQ,CAAC,CAACS,MAAF,CAASC,KAAV,CAAd;AACH,GAFsC,EAEpC,EAFoC,CAAvC;AAIA,SACI,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAEX;AAAhB,KACI,MAAC,IAAD,CAAM,IAAN,QACI,MAAC,KAAD,CAAO,QAAP;AACI,IAAA,IAAI,EAAE,CADV;AAEI,IAAA,KAAK,EAAER,WAFX;AAGI,IAAA,QAAQ,EAAEiB;AAHd,IADJ,CADJ,EAQI,MAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,EAAC,QAAhC;AAAyC,IAAA,OAAO,EAAEd;AAAlD,oBARJ,CADJ;AAcH,CA7CD;;AAmDA,eAAeL,WAAf","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { Button, Form, Input } from \"antd\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { ADD_COMMENT_REQUEST } from \"../reducers/post\";\r\n\r\nconst CommentForm = ({ post }) => {\r\n    const [commentText, setCommentText] = useState(\"\");\r\n    const { commentAdded, isAddingComment } = useSelector(state => state.post);\r\n    const { me } = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmitComment = useCallback(\r\n        e => {\r\n            e.preventDefault();\r\n            if (!me) {\r\n                return alert(\"로그인이 필요합니다.\");\r\n            }\r\n            return dispatch({\r\n                type: ADD_COMMENT_REQUEST,\r\n                data: {\r\n                    postId: post.id,\r\n                    content: commentText\r\n                }\r\n            });\r\n        },\r\n        [me && me.id, commentText]\r\n    );\r\n\r\n    useEffect(() => {\r\n        setCommentText(\"\");\r\n    }, [commentAdded === true]);\r\n\r\n    const onChangeCommentText = useCallback(e => {\r\n        setCommentText(e.target.value);\r\n    }, []);\r\n\r\n    return (\r\n        <Form onSubmit={onSubmitComment}>\r\n            <Form.Item>\r\n                <Input.TextArea\r\n                    rows={4}\r\n                    value={commentText}\r\n                    onChange={onChangeCommentText}\r\n                />\r\n            </Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" loading={isAddingComment}>\r\n                삐약\r\n            </Button>\r\n        </Form>\r\n    );\r\n};\r\n\r\nCommentForm.propTypes = {\r\n    post: PropTypes.object.isRequired\r\n};\r\n\r\nexport default CommentForm;\r\n"]},"metadata":{},"sourceType":"module"}