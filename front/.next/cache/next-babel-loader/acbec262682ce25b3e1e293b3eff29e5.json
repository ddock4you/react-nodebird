{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport Helmet from \"react-helmet\";\nimport Document, { Main, NextScript } from \"next/document\";\nimport { ServerStyleSheet } from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nclass MyDocument extends Document {\n  static async getInitialProps(context) {\n    // helmet 서버사이드 렌더링 시작\n    // page 변수 추가하기 전까지는 홈페이지가 표시되지 않아서 아래initialProps를 사용하여 화면단 표시\n    // const initialProps = await Document.getInitialProps(context);\n    // App === _App.js\n    // Document에서 App을 실행하여 렌더링 시켜줘야 함.\n    const sheet = new ServerStyleSheet();\n    const page = context.renderPage(App => props => sheet.collectStyles(__jsx(App, props)));\n    const styleTags = sheet.getStyleElement();\n    return _objectSpread({}, page, {\n      /*...initialProps,*/\n      helmet: Helmet.renderStatic(),\n      styleTags\n    });\n  }\n\n  render() {\n    const _this$props$helmet = this.props.helmet,\n          {\n      htmlAttributes,\n      bodyAttributes\n    } = _this$props$helmet,\n          helmet = _objectWithoutProperties(_this$props$helmet, [\"htmlAttributes\", \"bodyAttributes\"]);\n\n    const htmlAttrs = htmlAttributes.toComponent();\n    const bodyAttrs = bodyAttributes.toComponent(); // console.log(helmet);\n\n    return __jsx(\"html\", htmlAttrs, __jsx(\"head\", null, this.props.styleTags, Object.values(helmet).map(el => el.toComponent())), __jsx(\"body\", bodyAttrs, __jsx(Main, null), true && __jsx(\"script\", {\n      src: \"https://polyfill.io/v3/polyfill.min.js?features=es6,es7,es8,es9,NodeList.prototype.forEach&flags=gated\"\n    }), __jsx(NextScript, null)));\n  }\n\n}\n\nMyDocument.propTypes = {\n  helmet: PropTypes.object.isRequired,\n  styleTags: PropTypes.object.isRequired\n};\nexport default MyDocument;","map":{"version":3,"sources":["D:/project/react-nodebird/front/pages/_document.js"],"names":["React","Helmet","Document","Main","NextScript","ServerStyleSheet","PropTypes","MyDocument","getInitialProps","context","sheet","page","renderPage","App","props","collectStyles","styleTags","getStyleElement","helmet","renderStatic","render","htmlAttributes","bodyAttributes","htmlAttrs","toComponent","bodyAttrs","Object","values","map","el","propTypes","object","isRequired"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,QAAP,IAAmBC,IAAnB,EAAyBC,UAAzB,QAA2C,eAA3C;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;;AAEA,MAAMC,UAAN,SAAyBL,QAAzB,CAAkC;AAC9B,eAAaM,eAAb,CAA6BC,OAA7B,EAAsC;AAClC;AACA;AACA;AACA;AACA;AACA,UAAMC,KAAK,GAAG,IAAIL,gBAAJ,EAAd;AACA,UAAMM,IAAI,GAAGF,OAAO,CAACG,UAAR,CAAmBC,GAAG,IAAIC,KAAK,IACxCJ,KAAK,CAACK,aAAN,CAAoB,MAAC,GAAD,EAASD,KAAT,CAApB,CADS,CAAb;AAGA,UAAME,SAAS,GAAGN,KAAK,CAACO,eAAN,EAAlB;AACA,6BACON,IADP;AAEI;AAAqBO,MAAAA,MAAM,EAAEjB,MAAM,CAACkB,YAAP,EAFjC;AAGIH,MAAAA;AAHJ;AAKH;;AAEDI,EAAAA,MAAM,GAAG;AACL,+BAAsD,KAAKN,KAAL,CAAWI,MAAjE;AAAA,UAAM;AAAEG,MAAAA,cAAF;AAAkBC,MAAAA;AAAlB,KAAN;AAAA,UAA2CJ,MAA3C;;AACA,UAAMK,SAAS,GAAGF,cAAc,CAACG,WAAf,EAAlB;AACA,UAAMC,SAAS,GAAGH,cAAc,CAACE,WAAf,EAAlB,CAHK,CAIL;;AACA,WACI,cAAUD,SAAV,EACI,oBACK,KAAKT,KAAL,CAAWE,SADhB,EAEKU,MAAM,CAACC,MAAP,CAAcT,MAAd,EAAsBU,GAAtB,CAA0BC,EAAE,IAAIA,EAAE,CAACL,WAAH,EAAhC,CAFL,CADJ,EAKI,cAAUC,SAAV,EACI,MAAC,IAAD,OADJ,EAEK,QACG;AAAQ,MAAA,GAAG,EAAC;AAAZ,MAHR,EAKI,MAAC,UAAD,OALJ,CALJ,CADJ;AAeH;;AAvC6B;;AA0ClClB,UAAU,CAACuB,SAAX,GAAuB;AACnBZ,EAAAA,MAAM,EAAEZ,SAAS,CAACyB,MAAV,CAAiBC,UADN;AAEnBhB,EAAAA,SAAS,EAAEV,SAAS,CAACyB,MAAV,CAAiBC;AAFT,CAAvB;AAKA,eAAezB,UAAf","sourcesContent":["import React from \"react\";\r\nimport Helmet from \"react-helmet\";\r\nimport Document, { Main, NextScript } from \"next/document\";\r\nimport { ServerStyleSheet } from \"styled-components\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass MyDocument extends Document {\r\n    static async getInitialProps(context) {\r\n        // helmet 서버사이드 렌더링 시작\r\n        // page 변수 추가하기 전까지는 홈페이지가 표시되지 않아서 아래initialProps를 사용하여 화면단 표시\r\n        // const initialProps = await Document.getInitialProps(context);\r\n        // App === _App.js\r\n        // Document에서 App을 실행하여 렌더링 시켜줘야 함.\r\n        const sheet = new ServerStyleSheet();\r\n        const page = context.renderPage(App => props =>\r\n            sheet.collectStyles(<App {...props} />)\r\n        );\r\n        const styleTags = sheet.getStyleElement();\r\n        return {\r\n            ...page,\r\n            /*...initialProps,*/ helmet: Helmet.renderStatic(),\r\n            styleTags\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { htmlAttributes, bodyAttributes, ...helmet } = this.props.helmet;\r\n        const htmlAttrs = htmlAttributes.toComponent();\r\n        const bodyAttrs = bodyAttributes.toComponent();\r\n        // console.log(helmet);\r\n        return (\r\n            <html {...htmlAttrs}>\r\n                <head>\r\n                    {this.props.styleTags}\r\n                    {Object.values(helmet).map(el => el.toComponent())}\r\n                </head>\r\n                <body {...bodyAttrs}>\r\n                    <Main />\r\n                    {process.env.NODE_ENV === \"production\" && (\r\n                        <script src=\"https://polyfill.io/v3/polyfill.min.js?features=es6,es7,es8,es9,NodeList.prototype.forEach&flags=gated\" />\r\n                    )}\r\n                    <NextScript />\r\n                </body>\r\n            </html>\r\n        );\r\n    }\r\n}\r\n\r\nMyDocument.propTypes = {\r\n    helmet: PropTypes.object.isRequired,\r\n    styleTags: PropTypes.object.isRequired\r\n};\r\n\r\nexport default MyDocument;\r\n"]},"metadata":{},"sourceType":"module"}